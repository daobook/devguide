<!doctype html>
<html class="no-js" lang="zh_CN">
  <head><meta charset="utf-8"/>
    <meta name="viewport" content="width=device-width,initial-scale=1"/>
    <meta name="color-scheme" content="light dark"><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />
<link rel="index" title="索引" href="genindex.html" /><link rel="search" title="搜索" href="search.html" /><link rel="next" title="Appendix: Topics" href="appendix.html" /><link rel="prev" title="Core Developer Motivations and Affiliations" href="motivations.html" />

    <meta name="generator" content="sphinx-4.3.0, furo 2021.11.16"/>
        <title>Git Bootcamp and Cheat Sheet - Python Developer&#39;s Guide</title>
      <link rel="stylesheet" type="text/css" href="_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="_static/styles/furo.css?digest=916d6ed8f59335acffa15474ff504849343d4c76" />
    <link rel="stylesheet" type="text/css" href="_static/copybutton.css" />
    <link rel="stylesheet" type="text/css" href="_static/custom.css" />
    <link rel="stylesheet" type="text/css" href="_static/styles/furo-extensions.css?digest=0af69da206d614734f649b27d4cdc2dd6c31f41d" />
    
    


<style>
  body {
    --color-code-background: #eeffcc;
  --color-code-foreground: black;
  
  }
  body[data-theme="dark"] {
    --color-code-background: #202020;
  --color-code-foreground: #d0d0d0;
  
  }
  @media (prefers-color-scheme: dark) {
    body:not([data-theme="light"]) {
      --color-code-background: #202020;
  --color-code-foreground: #d0d0d0;
  
    }
  }
</style></head>
  <body>
    <script>
      document.body.dataset.theme = localStorage.getItem("theme") || "auto";
    </script>
    
<svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
  <symbol id="svg-toc" viewBox="0 0 24 24">
    <title>Contents</title>
    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round">
      <path stroke="none" d="M0 0h24v24H0z" />
      <line x1="4" y1="6" x2="20" y2="6" />
      <line x1="10" y1="12" x2="20" y2="12" />
      <line x1="6" y1="18" x2="20" y2="18" />
    </svg>
  </symbol>
  <symbol id="svg-menu" viewBox="0 0 24 24">
    <title>Menu</title>
    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather-menu">
      <line x1="3" y1="12" x2="21" y2="12"></line>
      <line x1="3" y1="6" x2="21" y2="6"></line>
      <line x1="3" y1="18" x2="21" y2="18"></line>
    </svg>
  </symbol>
  <symbol id="svg-arrow-right" viewBox="0 0 24 24">
    <title>Expand</title>
    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather-chevron-right">
      <polyline points="9 18 15 12 9 6"></polyline>
    </svg>
  </symbol>
  <symbol id="svg-sun" viewBox="0 0 24 24">
    <title>Light mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" class="feather-sun">
      <circle cx="12" cy="12" r="5"></circle>
      <line x1="12" y1="1" x2="12" y2="3"></line>
      <line x1="12" y1="21" x2="12" y2="23"></line>
      <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
      <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
      <line x1="1" y1="12" x2="3" y2="12"></line>
      <line x1="21" y1="12" x2="23" y2="12"></line>
      <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
      <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
    </svg>
  </symbol>
  <symbol id="svg-moon" viewBox="0 0 24 24">
    <title>Dark mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" class="icon-tabler-moon">
      <path stroke="none" d="M0 0h24v24H0z" fill="none" />
      <path d="M12 3c.132 0 .263 0 .393 0a7.5 7.5 0 0 0 7.92 12.446a9 9 0 1 1 -8.313 -12.454z" />
    </svg>
  </symbol>
  <symbol id="svg-sun-half" viewBox="0 0 24 24">
    <title>Auto light/dark mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" class="icon-tabler-shadow">
      <path stroke="none" d="M0 0h24v24H0z" fill="none"/>
      <circle cx="12" cy="12" r="9" />
      <path d="M13 12h5" />
      <path d="M13 15h4" />
      <path d="M13 18h1" />
      <path d="M13 9h4" />
      <path d="M13 6h1" />
    </svg>
  </symbol>
</svg>

<input type="checkbox" class="sidebar-toggle" name="__navigation" id="__navigation">
<input type="checkbox" class="sidebar-toggle" name="__toc" id="__toc">
<label class="overlay sidebar-overlay" for="__navigation">
  <div class="visually-hidden">Hide navigation sidebar</div>
</label>
<label class="overlay toc-overlay" for="__toc">
  <div class="visually-hidden">Hide table of contents sidebar</div>
</label>



<div class="page">
  <header class="mobile-header">
    <div class="header-left">
      <label class="nav-overlay-icon" for="__navigation">
        <div class="visually-hidden">Toggle site navigation sidebar</div>
        <i class="icon"><svg><use href="#svg-menu"></use></svg></i>
      </label>
    </div>
    <div class="header-center">
      <a href="index.html"><div class="brand">Python Developer's Guide </div></a>
    </div>
    <div class="header-right">
      <div class="theme-toggle-container theme-toggle-header">
        <button class="theme-toggle">
          <div class="visually-hidden">Toggle Light / Dark / Auto color theme</div>
          <svg class="theme-icon-when-auto"><use href="#svg-sun-half"></use></svg>
          <svg class="theme-icon-when-dark"><use href="#svg-moon"></use></svg>
          <svg class="theme-icon-when-light"><use href="#svg-sun"></use></svg>
        </button>
      </div>
      <label class="toc-overlay-icon toc-header-icon" for="__toc">
        <div class="visually-hidden">Toggle table of contents sidebar</div>
        <i class="icon"><svg><use href="#svg-toc"></use></svg></i>
      </label>
    </div>
  </header>
  <aside class="sidebar-drawer">
    <div class="sidebar-container">
      
      <div class="sidebar-sticky"><a class="sidebar-brand centered" href="index.html">
  
  <div class="sidebar-logo-container">
    <img class="sidebar-logo" src="_static/python-logo.png" alt="Logo"/>
  </div>
  
  <span class="sidebar-brand-text">Python Developer's Guide </span>
  
</a><form class="sidebar-search-container" method="get" action="search.html" role="search">
  <input class="sidebar-search" placeholder=搜索 name="q" aria-label="搜索">
  <input type="hidden" name="check_keywords" value="yes">
  <input type="hidden" name="area" value="default">
</form>
<div id="searchbox"></div><div class="sidebar-scroll"><div class="sidebar-tree">
  <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="setup.html">Getting Started</a></li>
<li class="toctree-l1"><a class="reference internal" href="help.html">Where to Get Help</a></li>
<li class="toctree-l1"><a class="reference internal" href="pullrequest.html">Lifecycle of a Pull Request</a></li>
<li class="toctree-l1"><a class="reference internal" href="runtests.html">Running &amp; Writing Tests</a></li>
<li class="toctree-l1"><a class="reference internal" href="coverage.html">Increase Test Coverage</a></li>
<li class="toctree-l1"><a class="reference internal" href="docquality.html">Helping with Documentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="documenting.html">Documenting Python</a></li>
<li class="toctree-l1"><a class="reference internal" href="silencewarnings.html">Silence Warnings From the Test Suite</a></li>
<li class="toctree-l1"><a class="reference internal" href="fixingissues.html">Fixing “easy” Issues (and Beyond)</a></li>
<li class="toctree-l1"><a class="reference internal" href="tracker.html">Issue Tracking</a></li>
<li class="toctree-l1"><a class="reference internal" href="triaging.html">Triaging an Issue</a></li>
<li class="toctree-l1"><a class="reference internal" href="communication.html">Following Python’s Development</a></li>
<li class="toctree-l1"><a class="reference internal" href="porting.html">Porting Python to a new platform</a></li>
<li class="toctree-l1"><a class="reference internal" href="coredev.html">How to Become a Core Developer</a></li>
<li class="toctree-l1"><a class="reference internal" href="developers.html">Developer Log</a></li>
<li class="toctree-l1"><a class="reference internal" href="committing.html">Accepting Pull Requests</a></li>
<li class="toctree-l1"><a class="reference internal" href="devcycle.html">Development Cycle</a></li>
<li class="toctree-l1"><a class="reference internal" href="buildbots.html">Continuous Integration</a></li>
<li class="toctree-l1"><a class="reference internal" href="stdlibchanges.html">Adding to the Stdlib</a></li>
<li class="toctree-l1"><a class="reference internal" href="langchanges.html">Changing the Python Language</a></li>
<li class="toctree-l1"><a class="reference internal" href="experts.html">Experts Index</a></li>
<li class="toctree-l1"><a class="reference internal" href="gdb.html">gdb Support</a></li>
<li class="toctree-l1"><a class="reference internal" href="exploring.html">Exploring CPython’s Internals</a></li>
<li class="toctree-l1"><a class="reference internal" href="grammar.html">Changing CPython’s Grammar</a></li>
<li class="toctree-l1"><a class="reference internal" href="parser.html">Guide to CPython’s Parser</a></li>
<li class="toctree-l1"><a class="reference internal" href="compiler.html">Design of CPython’s Compiler</a></li>
<li class="toctree-l1"><a class="reference internal" href="garbage_collector.html">Design of CPython’s Garbage Collector</a></li>
<li class="toctree-l1"><a class="reference internal" href="extensions.html">Updating standard library extension modules</a></li>
<li class="toctree-l1"><a class="reference internal" href="c-api.html">Changing Python’s C API</a></li>
<li class="toctree-l1"><a class="reference internal" href="coverity.html">Coverity Scan</a></li>
<li class="toctree-l1"><a class="reference internal" href="clang.html">Dynamic Analysis with Clang</a></li>
<li class="toctree-l1"><a class="reference internal" href="buildworker.html">Running a buildbot worker</a></li>
<li class="toctree-l1"><a class="reference internal" href="motivations.html">Core Developer Motivations and Affiliations</a></li>
<li class="toctree-l1 current current-page"><a class="current reference internal" href="#">Git Bootcamp and Cheat Sheet</a></li>
<li class="toctree-l1"><a class="reference internal" href="appendix.html">Appendix: Topics</a></li>
</ul>

</div>
</div>
      </div>
      
    </div>
  </aside>
  <div class="main">
    <div class="content">
      <div class="article-container">
        <div class="content-icon-container">
          <div class="theme-toggle-container theme-toggle-content">
            <button class="theme-toggle">
              <div class="visually-hidden">Toggle Light / Dark / Auto color theme</div>
              <svg class="theme-icon-when-auto"><use href="#svg-sun-half"></use></svg>
              <svg class="theme-icon-when-dark"><use href="#svg-moon"></use></svg>
              <svg class="theme-icon-when-light"><use href="#svg-sun"></use></svg>
            </button>
          </div>
          <label class="toc-overlay-icon toc-content-icon" for="__toc">
            <div class="visually-hidden">Toggle table of contents sidebar</div>
            <i class="icon"><svg><use href="#svg-toc"></use></svg></i>
          </label>
        </div>
        <article role="main">
          <section id="git-bootcamp-and-cheat-sheet">
<span id="gitbootcamp"></span><h1>Git Bootcamp and Cheat Sheet<a class="headerlink" href="#git-bootcamp-and-cheat-sheet" title="永久链接至标题">¶</a></h1>
<div class="admonition note">
<p class="admonition-title">注解</p>
<p>This section provides instructions on common tasks in CPython’s
workflow. It’s designed to assist new contributors who have
some familiarity with git and GitHub.</p>
<p>If you are new to git and GitHub, please become comfortable with
these instructions before submitting a pull request. As there are several
ways to accomplish these tasks using git and GitHub, this section reflects
one method suitable for new contributors. Experienced contributors may
desire a different approach.</p>
</div>
<p>In this section, we will go over some commonly used Git commands that are
relevant to CPython’s workflow.</p>
<div class="admonition note">
<p class="admonition-title">注解</p>
<p>Setting up git aliases for common tasks can be useful to you. You can
get more information about that in
<a class="reference external" href="https://git-scm.com/book/en/v2/Git-Basics-Git-Aliases">git documentation</a></p>
</div>
<section id="forking-cpython-github-repository">
<span id="fork-cpython"></span><h2>Forking CPython GitHub Repository<a class="headerlink" href="#forking-cpython-github-repository" title="永久链接至标题">¶</a></h2>
<p>You will only need to do this once.</p>
<ol class="arabic simple">
<li><p>Go to <a class="reference external" href="https://github.com/python/cpython">https://github.com/python/cpython</a>.</p></li>
<li><p>Press <code class="docutils literal notranslate"><span class="pre">Fork</span></code> on the top right.</p></li>
<li><p>When asked where to fork the repository, choose to fork it to your username.</p></li>
<li><p>Your forked CPython repository will be created at <a class="reference external" href="https://github.com">https://github.com</a>/&lt;username&gt;/cpython.</p></li>
</ol>
</section>
<section id="cloning-a-forked-cpython-repository">
<span id="clone-your-fork"></span><h2>Cloning a Forked CPython Repository<a class="headerlink" href="#cloning-a-forked-cpython-repository" title="永久链接至标题">¶</a></h2>
<p>You will only need to do this once.  From your command line:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">git clone git@github.com:&lt;username&gt;/cpython.git</span>
</pre></div>
</div>
<p>It is also recommended to configure an <code class="docutils literal notranslate"><span class="pre">upstream</span></code> remote repository:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">cd cpython</span>
<span class="go">git remote add upstream git@github.com:python/cpython.git</span>
</pre></div>
</div>
<p>You can also use SSH-based or HTTPS-based URLs.</p>
</section>
<section id="listing-the-remote-repositories">
<h2>Listing the Remote Repositories<a class="headerlink" href="#listing-the-remote-repositories" title="永久链接至标题">¶</a></h2>
<p>To list the remote repositories that are configured, along with their URLs:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">git remote -v</span>
</pre></div>
</div>
<p>You should have two remote repositories: <code class="docutils literal notranslate"><span class="pre">origin</span></code> pointing to your forked CPython repository,
and <code class="docutils literal notranslate"><span class="pre">upstream</span></code> pointing to the official CPython repository:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">origin  git@github.com:&lt;username&gt;/cpython.git (fetch)</span>
<span class="go">origin  git@github.com:&lt;username&gt;/cpython.git (push)</span>
<span class="go">upstream        git@github.com:python/cpython.git (fetch)</span>
<span class="go">upstream        git@github.com:python/cpython.git (push)</span>
</pre></div>
</div>
</section>
<section id="setting-up-your-name-and-email-address">
<span id="set-up-name-email"></span><h2>Setting Up Your Name and Email Address<a class="headerlink" href="#setting-up-your-name-and-email-address" title="永久链接至标题">¶</a></h2>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>git config --global user.name <span class="s2">"Your Name"</span>
git config --global user.email your.email@example.com
</pre></div>
</div>
<p>The <code class="docutils literal notranslate"><span class="pre">--global</span></code> flag sets these parameters globally while
the <code class="docutils literal notranslate"><span class="pre">--local</span></code> flag sets them only for the current project.</p>
</section>
<section id="enabling-autocrlf-on-windows">
<span id="autocrlf"></span><h2>Enabling <code class="docutils literal notranslate"><span class="pre">autocrlf</span></code> on Windows<a class="headerlink" href="#enabling-autocrlf-on-windows" title="永久链接至标题">¶</a></h2>
<p>The <code class="docutils literal notranslate"><span class="pre">autocrlf</span></code> option will fix automatically any Windows-specific line endings.
This should be enabled on Windows, since the public repository has a hook which
will reject all changesets having the wrong line endings:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">git config --global core.autocrlf input</span>
</pre></div>
</div>
</section>
<section id="creating-and-switching-branches">
<h2>Creating and Switching Branches<a class="headerlink" href="#creating-and-switching-branches" title="永久链接至标题">¶</a></h2>
<div class="admonition important">
<p class="admonition-title">重要</p>
<p>Never commit directly to the <code class="docutils literal notranslate"><span class="pre">main</span></code> branch.</p>
</div>
<p>Create a new branch and switch to it:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp"># </span>creates a new branch off main and switch to it
<span class="go">git checkout -b &lt;branch-name&gt; main</span>
</pre></div>
</div>
<p>This is equivalent to:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp"># </span>create a new branch from main, without checking it out
<span class="go">git branch &lt;branch-name&gt; main</span>
<span class="gp"># </span>check out the branch
<span class="go">git checkout &lt;branch-name&gt;</span>
</pre></div>
</div>
<p>To find the branch you are currently on:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">git branch</span>
</pre></div>
</div>
<p>The current branch will have an asterisk next to the branch name.  Note, this
will only list all of your local branches.</p>
<p>To list all the branches, including the remote branches:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">git branch -a</span>
</pre></div>
</div>
<p>To switch to a different branch:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">git checkout &lt;another-branch-name&gt;</span>
</pre></div>
</div>
<p>Other releases are just branches in the repository.  For example, to work
on the 2.7 release from the <code class="docutils literal notranslate"><span class="pre">upstream</span></code> remote:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">git checkout -b 2.7 upstream/2.7</span>
</pre></div>
</div>
</section>
<section id="deleting-branches">
<span id="id1"></span><h2>Deleting Branches<a class="headerlink" href="#deleting-branches" title="永久链接至标题">¶</a></h2>
<p>To delete a <strong>local</strong> branch that you no longer need:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">git checkout main</span>
<span class="go">git branch -D &lt;branch-name&gt;</span>
</pre></div>
</div>
<p>To delete a <strong>remote</strong> branch:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">git push origin -d &lt;branch-name&gt;</span>
</pre></div>
</div>
<p>You may specify more than one branch for deletion.</p>
</section>
<section id="renaming-branch">
<h2>Renaming Branch<a class="headerlink" href="#renaming-branch" title="永久链接至标题">¶</a></h2>
<p>The CPython repository’s default branch was renamed from <code class="docutils literal notranslate"><span class="pre">master</span></code> to
<code class="docutils literal notranslate"><span class="pre">main</span></code> after the Python 3.10b1 release.</p>
<p>If you have a fork on GitHub (as described in <a class="reference internal" href="#fork-cpython"><span class="std std-ref">Forking CPython GitHub Repository</span></a>) that was
created before the rename, you should visit the GitHub page for your fork to
rename the branch there. You only have to do this once. GitHub should
provide you with a dialog for this. If it doesn’t (or the dialog was already
dismissed), you can rename the branch in your fork manually <a class="reference external" href="https://github.com/github/renaming#renaming-existing-branches">by following
these GitHub instructions</a></p>
<p>After renaming the branch in your fork, you need to update any local clones
as well. This only has to be done once per clone:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">git branch -m master main</span>
<span class="go">git fetch origin</span>
<span class="go">git branch -u origin/main main</span>
<span class="go">git remote set-head origin -a</span>
</pre></div>
</div>
<p>(GitHub also provides these instructions after you rename the branch.)</p>
<p>If you do not have a fork on GitHub, but rather a direct clone of the main
repo created before the branch rename, you still have to update your local
clones. This still only has to be done once per clone. In that case, you can
rename your local branch as follows:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">git branch -m master main</span>
<span class="go">git fetch upstream</span>
<span class="go">git branch -u upstream/main main</span>
</pre></div>
</div>
</section>
<section id="staging-and-committing-files">
<h2>Staging and Committing Files<a class="headerlink" href="#staging-and-committing-files" title="永久链接至标题">¶</a></h2>
<ol class="arabic">
<li><p>To show the current changes:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">git status</span>
</pre></div>
</div>
</li>
<li><p>To stage the files to be included in your commit:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">git add &lt;filename1&gt; &lt;filename2&gt;</span>
</pre></div>
</div>
</li>
<li><p>To commit the files that have been staged (done in step 2):</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>git commit -m <span class="s2">"bpo-XXXX: This is the commit message."</span>
</pre></div>
</div>
</li>
</ol>
</section>
<section id="reverting-changes">
<h2>Reverting Changes<a class="headerlink" href="#reverting-changes" title="永久链接至标题">¶</a></h2>
<p>To revert changes to a file that has not been committed yet:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">git checkout &lt;filename&gt;</span>
</pre></div>
</div>
<p>If the change has been committed, and now you want to reset it to whatever
the origin is at:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">git reset --hard HEAD</span>
</pre></div>
</div>
</section>
<section id="stashing-changes">
<h2>Stashing Changes<a class="headerlink" href="#stashing-changes" title="永久链接至标题">¶</a></h2>
<p>To stash away changes that are not ready to be committed yet:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">git stash</span>
</pre></div>
</div>
<p>To re-apply the last stashed change:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">git stash pop</span>
</pre></div>
</div>
</section>
<section id="committing-changes">
<span id="commit-changes"></span><h2>Committing Changes<a class="headerlink" href="#committing-changes" title="永久链接至标题">¶</a></h2>
<p>Add the files you want to commit:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">git add &lt;filename&gt;</span>
</pre></div>
</div>
<p>Commit the files:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>git commit -m <span class="s2">"&lt;message&gt;"</span>
</pre></div>
</div>
</section>
<section id="pushing-changes">
<span id="push-changes"></span><h2>Pushing Changes<a class="headerlink" href="#pushing-changes" title="永久链接至标题">¶</a></h2>
<p>Once your changes are ready for a review or a pull request, you will need to push
them to the remote repository.</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">git checkout &lt;branch-name&gt;</span>
<span class="go">git push origin &lt;branch-name&gt;</span>
</pre></div>
</div>
</section>
<section id="creating-a-pull-request">
<h2>Creating a Pull Request<a class="headerlink" href="#creating-a-pull-request" title="永久链接至标题">¶</a></h2>
<ol class="arabic simple">
<li><p>Go to <a class="reference external" href="https://github.com/python/cpython">https://github.com/python/cpython</a>.</p></li>
<li><p>Press the <code class="docutils literal notranslate"><span class="pre">New</span> <span class="pre">pull</span> <span class="pre">request</span></code> button.</p></li>
<li><p>Click the <code class="docutils literal notranslate"><span class="pre">compare</span> <span class="pre">across</span> <span class="pre">forks</span></code> link.</p></li>
<li><p>Select the base repository: <code class="docutils literal notranslate"><span class="pre">python/cpython</span></code> and base branch: <code class="docutils literal notranslate"><span class="pre">main</span></code>.</p></li>
<li><p>Select the head repository: <code class="docutils literal notranslate"><span class="pre">&lt;username&gt;/cpython</span></code> and head branch: the branch
containing your changes.</p></li>
<li><p>Press the <code class="docutils literal notranslate"><span class="pre">Create</span> <span class="pre">pull</span> <span class="pre">request</span></code> button.</p></li>
</ol>
</section>
<section id="updating-your-cpython-fork">
<h2>Updating your CPython Fork<a class="headerlink" href="#updating-your-cpython-fork" title="永久链接至标题">¶</a></h2>
<p>Scenario:</p>
<ul class="simple">
<li><p>You forked the CPython repository some time ago.</p></li>
<li><p>Time passes.</p></li>
<li><p>There have been new commits made in the upstream CPython repository.</p></li>
<li><p>Your forked CPython repository is no longer up to date.</p></li>
<li><p>You now want to update your forked CPython repository to be the same as
the upstream CPython repository.</p></li>
</ul>
<p>Please do not try to solve this by creating a pull request from
<code class="docutils literal notranslate"><span class="pre">python:main</span></code> to <code class="docutils literal notranslate"><span class="pre">&lt;username&gt;:main</span></code> as the authors of the patches will
get notified unnecessarily.</p>
<p>Solution:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">git checkout main</span>
<span class="go">git pull upstream main</span>
<span class="go">git push origin main</span>
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">注解</p>
<p>For the above commands to work, please follow the instructions found
in the <a class="reference internal" href="setup.html#checkout"><span class="std std-ref">Get the source code</span></a> section</p>
</div>
<p>Another scenario:</p>
<ul class="simple">
<li><p>You created <code class="docutils literal notranslate"><span class="pre">some-branch</span></code> some time ago.</p></li>
<li><p>Time passes.</p></li>
<li><p>You made some commits to <code class="docutils literal notranslate"><span class="pre">some-branch</span></code>.</p></li>
<li><p>Meanwhile, there are recent changes from the upstream CPython repository.</p></li>
<li><p>You want to incorporate the recent changes from the upstream CPython
repository into <code class="docutils literal notranslate"><span class="pre">some-branch</span></code>.</p></li>
</ul>
<p>Solution:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">git checkout some-branch</span>
<span class="go">git fetch upstream</span>
<span class="go">git merge upstream/main</span>
<span class="go">git push origin some-branch</span>
</pre></div>
</div>
<p>You may see error messages like “CONFLICT” and “Automatic merge failed;” when
you run <code class="docutils literal notranslate"><span class="pre">git</span> <span class="pre">merge</span> <span class="pre">upstream/main</span></code>.</p>
<p>When it happens, you need to resolve conflict.  See these articles about resolving conflicts:</p>
<ul class="simple">
<li><p><a class="reference external" href="https://help.github.com/en/articles/about-merge-conflicts">About merge conflicts</a></p></li>
<li><p><a class="reference external" href="https://help.github.com/en/articles/resolving-a-merge-conflict-using-the-command-line">Resolving a merge conflict using the command line</a></p></li>
</ul>
</section>
<section id="applying-a-patch-from-mercurial-to-git">
<span id="git-from-mercurial"></span><h2>Applying a Patch from Mercurial to Git<a class="headerlink" href="#applying-a-patch-from-mercurial-to-git" title="永久链接至标题">¶</a></h2>
<p>Scenario:</p>
<ul class="simple">
<li><p>A Mercurial patch exists but there is no pull request for it.</p></li>
</ul>
<p>Solution:</p>
<ol class="arabic">
<li><p>Download the patch locally.</p></li>
<li><p>Apply the patch:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">git apply /path/to/issueNNNN-git.patch</span>
</pre></div>
</div>
<p>If there are errors, update to a revision from when the patch was
created and then try the <code class="docutils literal notranslate"><span class="pre">git</span> <span class="pre">apply</span></code> again:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>git checkout <span class="k">$(</span>git rev-list -n <span class="m">1</span> --before<span class="o">=</span><span class="s2">"yyyy-mm-dd hh:mm:ss"</span> main<span class="k">)</span>
git apply /path/to/issueNNNN-git.patch
</pre></div>
</div>
<p>If the patch still won’t apply, then a patch tool will not be able to
apply the patch and it will need to be re-implemented manually.</p>
</li>
<li><p>If the apply was successful, create a new branch and switch to it.</p></li>
<li><p>Stage and commit the changes.</p></li>
<li><p>If the patch was applied to an old revision, it needs to be updated and
merge conflicts need to be resolved:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">git rebase main</span>
<span class="go">git mergetool</span>
</pre></div>
</div>
</li>
<li><p>Push the changes and open a pull request.</p></li>
</ol>
</section>
<section id="downloading-other-s-patches">
<span id="git-pr"></span><h2>Downloading Other’s Patches<a class="headerlink" href="#downloading-other-s-patches" title="永久链接至标题">¶</a></h2>
<p>Scenario:</p>
<ul class="simple">
<li><p>A contributor made a pull request to CPython.</p></li>
<li><p>Before merging it, you want to be able to test their changes locally.</p></li>
</ul>
<p>On Unix and MacOS, set up the following git alias:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>git config --global alias.pr <span class="s1">'!sh -c "git fetch upstream pull/${1}/head:pr_${1} &amp;&amp; git checkout pr_${1}" -'</span>
</pre></div>
</div>
<p>On Windows, reverse the single (<code class="docutils literal notranslate"><span class="pre">'</span></code>) and double (<code class="docutils literal notranslate"><span class="pre">"</span></code>) quotes:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>git config --global alias.pr <span class="s2">"!sh -c 'git fetch upstream pull/</span><span class="si">${</span><span class="nv">1</span><span class="si">}</span><span class="s2">/head:pr_</span><span class="si">${</span><span class="nv">1</span><span class="si">}</span><span class="s2"> &amp;&amp; git checkout pr_</span><span class="si">${</span><span class="nv">1</span><span class="si">}</span><span class="s2">' -"</span>
</pre></div>
</div>
<p>The alias only needs to be done once.  After the alias is set up, you can get a
local copy of a pull request as follows:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">git pr &lt;pr_number&gt;</span>
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">注解</p>
<p><a class="reference external" href="https://github.com/github/hub">hub</a> command line utility makes this
workflow very easy.  You can check out the branch by
<code class="docutils literal notranslate"><span class="pre">hub</span> <span class="pre">pr</span> <span class="pre">checkout</span> <span class="pre">&lt;pr_number&gt;</span> <span class="pre">[&lt;branch_name&gt;]</span></code>.
This command configures remote URL for the branch too.
So you can <code class="docutils literal notranslate"><span class="pre">git</span> <span class="pre">push</span></code> if the pull request author checked
“Allow edits from maintainers” when creating the pull request.</p>
</div>
</section>
<section id="accepting-and-merging-a-pull-request">
<span id="accepting-and-merging-a-pr"></span><h2>Accepting and Merging a Pull Request<a class="headerlink" href="#accepting-and-merging-a-pull-request" title="永久链接至标题">¶</a></h2>
<p>Pull requests can be accepted and merged by a Python Core Developer.</p>
<ol class="arabic">
<li><p>At the bottom of the pull request page, click the <code class="docutils literal notranslate"><span class="pre">Squash</span> <span class="pre">and</span> <span class="pre">merge</span></code>
button.</p></li>
<li><p>Replace the reference to GitHub pull request <code class="docutils literal notranslate"><span class="pre">#NNNN</span></code> with <code class="docutils literal notranslate"><span class="pre">GH-NNNN</span></code>.
If the title is too long, the pull request number can be added to the
message body.</p></li>
<li><p>Adjust and clean up the commit message.</p>
<p>Example of good commit message:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">bpo-12345: Improve the spam module (GH-777)</span>

<span class="go">* Add method A to the spam module</span>
<span class="go">* Update the documentation of the spam module</span>
</pre></div>
</div>
<p>Example of bad commit message:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">bpo-12345: Improve the spam module (#777)</span>

<span class="go">* Improve the spam module</span>
<span class="go">* merge from main</span>
<span class="go">* adjust code based on review comment</span>
<span class="go">* rebased</span>
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">注解</p>
<p><a class="reference external" href="https://chris.beams.io/posts/git-commit/">How to Write a Git Commit Message</a>
is a nice article describing how to write a good commit message.</p>
</div>
</li>
<li><p>Press the <code class="docutils literal notranslate"><span class="pre">Confirm</span> <span class="pre">squash</span> <span class="pre">and</span> <span class="pre">merge</span></code> button.</p></li>
</ol>
</section>
<section id="backporting-merged-changes">
<h2>Backporting Merged Changes<a class="headerlink" href="#backporting-merged-changes" title="永久链接至标题">¶</a></h2>
<p>A pull request may need to be backported into one of the maintenance branches
after it has been accepted and merged into <code class="docutils literal notranslate"><span class="pre">main</span></code>.  It is usually indicated
by the label <code class="docutils literal notranslate"><span class="pre">needs</span> <span class="pre">backport</span> <span class="pre">to</span> <span class="pre">X.Y</span></code> on the pull request itself.</p>
<p>Use the utility script
<a class="reference external" href="https://github.com/python/cherry-picker">cherry_picker.py</a>
from the <a class="reference external" href="https://github.com/python/core-workflow">core-workflow</a>
repository to backport the commit.</p>
<p>The commit hash for backporting is the squashed commit that was merged to
the <code class="docutils literal notranslate"><span class="pre">main</span></code> branch.  On the merged pull request, scroll to the bottom of the
page.  Find the event that says something like:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">&lt;core_developer&gt; merged commit &lt;commit_sha1&gt; into python:main &lt;sometime&gt; ago.</span>
</pre></div>
</div>
<p>By following the link to <code class="docutils literal notranslate"><span class="pre">&lt;commit_sha1&gt;</span></code>, you will get the full commit hash.</p>
<p>Alternatively, the commit hash can also be obtained by the following git
commands:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>git fetch upstream
git rev-parse <span class="s2">":/bpo-12345"</span>
</pre></div>
</div>
<p>The above commands will print out the hash of the commit containing
<code class="docutils literal notranslate"><span class="pre">"bpo-12345"</span></code> as part of the commit message.</p>
<p>When formatting the commit message for a backport commit: leave the original
one as is and delete the number of the backport pull request.</p>
<p>Example of good backport commit message:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">bpo-12345: Improve the spam module (GH-777)</span>

<span class="go">* Add method A to the spam module</span>
<span class="go">* Update the documentation of the spam module</span>

<span class="gp gp-VirtualEnv">(cherry picked from commit 62adc55)</span>
</pre></div>
</div>
<p>Example of bad backport commit message:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">bpo-12345: Improve the spam module (GH-777) (#888)</span>

<span class="go">* Add method A to the spam module</span>
<span class="go">* Update the documentation of the spam module</span>
</pre></div>
</div>
</section>
<section id="editing-a-pull-request-prior-to-merging">
<h2>Editing a Pull Request Prior to Merging<a class="headerlink" href="#editing-a-pull-request-prior-to-merging" title="永久链接至标题">¶</a></h2>
<p>When a pull request submitter has enabled the <a class="reference external" href="https://help.github.com/articles/allowing-changes-to-a-pull-request-branch-created-from-a-fork/">Allow edits from maintainers</a>
option, Python Core Developers may decide to make any remaining edits needed
prior to merging themselves, rather than asking the submitter to do them. This
can be particularly appropriate when the remaining changes are bookkeeping
items like updating <code class="docutils literal notranslate"><span class="pre">Misc/ACKS</span></code>.</p>
<p>To edit an open pull request that targets <code class="docutils literal notranslate"><span class="pre">main</span></code>:</p>
<ol class="arabic">
<li><p>In the pull request page, under the description, there is some information
about the contributor’s forked CPython repository and branch name that will be useful later:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">&lt;contributor&gt; wants to merge 1 commit into python:main from &lt;contributor&gt;:&lt;branch_name&gt;</span>
</pre></div>
</div>
</li>
<li><p>Fetch the pull request, using the <a class="reference internal" href="#git-pr"><span class="std std-ref">git pr</span></a> alias:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">git pr &lt;pr_number&gt;</span>
</pre></div>
</div>
<p>This will checkout the contributor’s branch at <code class="docutils literal notranslate"><span class="pre">&lt;pr_number&gt;</span></code>.</p>
</li>
<li><p>Make and commit your changes on the branch.  For example, merge in changes
made to <code class="docutils literal notranslate"><span class="pre">main</span></code> since the PR was submitted (any merge commits will be
removed by the later <code class="docutils literal notranslate"><span class="pre">Squash</span> <span class="pre">and</span> <span class="pre">Merge</span></code> when accepting the change):</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>git fetch upstream
git merge upstream/main
git add &lt;filename&gt;
git commit -m <span class="s2">"&lt;message&gt;"</span>
</pre></div>
</div>
</li>
<li><p>Push the changes back to the contributor’s PR branch:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">git push git@github.com:&lt;contributor&gt;/cpython &lt;pr_number&gt;:&lt;branch_name&gt;</span>
</pre></div>
</div>
</li>
<li><p>Optionally, <a class="reference internal" href="#deleting-branches"><span class="std std-ref">delete the PR branch</span></a>.</p></li>
</ol>
</section>
</section>

        </article>
      </div>
      <footer>
        
        <div class="related-pages">
          <a class="next-page" href="appendix.html">
              <div class="page-info">
                <div class="context">
                  <span>Next</span>
                </div>
                <div class="title">Appendix: Topics</div>
              </div>
              <svg><use href="#svg-arrow-right"></use></svg>
            </a>
          <a class="prev-page" href="motivations.html">
              <svg><use href="#svg-arrow-right"></use></svg>
              <div class="page-info">
                <div class="context">
                  <span>Previous</span>
                </div>
                
                <div class="title">Core Developer Motivations and Affiliations</div>
                
              </div>
            </a>
        </div>

        <div class="related-information">
              Copyright &#169; 2011-2021, Python Software Foundation |
            最后更新于 11月 22, 2021. |
          Created using <a href="https://www.sphinx-doc.org/">Sphinx</a> and <a class="muted-link" href="https://pradyunsg.me">@pradyunsg</a>'s
          <a href="https://github.com/pradyunsg/furo">Furo theme</a>.
            | <a class="muted-link" href="_sources/gitbootcamp.rst.txt"
               rel="nofollow">
              显示源代码
            </a>
        </div>
        
      </footer>
    </div>
    <aside class="toc-drawer">
      
      
      <div class="toc-sticky toc-scroll">
        <div class="toc-title-container">
          <span class="toc-title">
            目录
          </span>
        </div>
        <div class="toc-tree-container">
          <div class="toc-tree">
            <ul>
<li><a class="reference internal" href="#">Git Bootcamp and Cheat Sheet</a><ul>
<li><a class="reference internal" href="#forking-cpython-github-repository">Forking CPython GitHub Repository</a></li>
<li><a class="reference internal" href="#cloning-a-forked-cpython-repository">Cloning a Forked CPython Repository</a></li>
<li><a class="reference internal" href="#listing-the-remote-repositories">Listing the Remote Repositories</a></li>
<li><a class="reference internal" href="#setting-up-your-name-and-email-address">Setting Up Your Name and Email Address</a></li>
<li><a class="reference internal" href="#enabling-autocrlf-on-windows">Enabling <code class="docutils literal notranslate"><span class="pre">autocrlf</span></code> on Windows</a></li>
<li><a class="reference internal" href="#creating-and-switching-branches">Creating and Switching Branches</a></li>
<li><a class="reference internal" href="#deleting-branches">Deleting Branches</a></li>
<li><a class="reference internal" href="#renaming-branch">Renaming Branch</a></li>
<li><a class="reference internal" href="#staging-and-committing-files">Staging and Committing Files</a></li>
<li><a class="reference internal" href="#reverting-changes">Reverting Changes</a></li>
<li><a class="reference internal" href="#stashing-changes">Stashing Changes</a></li>
<li><a class="reference internal" href="#committing-changes">Committing Changes</a></li>
<li><a class="reference internal" href="#pushing-changes">Pushing Changes</a></li>
<li><a class="reference internal" href="#creating-a-pull-request">Creating a Pull Request</a></li>
<li><a class="reference internal" href="#updating-your-cpython-fork">Updating your CPython Fork</a></li>
<li><a class="reference internal" href="#applying-a-patch-from-mercurial-to-git">Applying a Patch from Mercurial to Git</a></li>
<li><a class="reference internal" href="#downloading-other-s-patches">Downloading Other’s Patches</a></li>
<li><a class="reference internal" href="#accepting-and-merging-a-pull-request">Accepting and Merging a Pull Request</a></li>
<li><a class="reference internal" href="#backporting-merged-changes">Backporting Merged Changes</a></li>
<li><a class="reference internal" href="#editing-a-pull-request-prior-to-merging">Editing a Pull Request Prior to Merging</a></li>
</ul>
</li>
</ul>

          </div>
        </div>
      </div>
      
      
    </aside>
  </div>
</div><script data-url_root="./" id="documentation_options" src="_static/documentation_options.js"></script>
    <script src="_static/jquery.js"></script>
    <script src="_static/underscore.js"></script>
    <script src="_static/doctools.js"></script>
    <script src="_static/scripts/furo.js"></script>
    <script src="_static/clipboard.min.js"></script>
    <script src="_static/copybutton.js"></script>
    <script src="_static/translations.js"></script>
    </body>
</html>